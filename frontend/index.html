<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex" />
    <title>Photo Hub for 監査</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;500;700&family=Zen+Old+Mincho:wght@500;700&display=swap"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="container">
      <div class="page-header">
        <h1>Photo Hub for 監査</h1>
        <div class="menu-wrap hidden" id="global-menu-wrap">
          <button id="menu-btn" class="menu-btn" type="button" aria-label="menu">☰</button>
          <div id="menu-panel" class="menu-panel hidden">
            <label class="menu-label" for="season-select">季節テーマ</label>
            <select id="season-select">
              <option value="spring">春</option>
              <option value="summer">夏</option>
              <option value="autumn">秋</option>
              <option value="winter">冬</option>
            </select>
            <button id="toggle-theme-btn" type="button">ダークモード切替</button>
            <button id="team-admin-btn" type="button" class="hidden">チーム管理</button>
            <button id="reset-user-btn" type="button">ユーザー名変更</button>
            <button id="leave-room-btn" type="button" class="danger">退出</button>
            <button id="logout-btn" type="button" class="danger">ログアウト</button>
          </div>
        </div>
      </div>

      <section id="user-setup" class="card hidden">
        <div class="row">
          <button id="login-btn">ログイン</button>
          <button id="signup-btn" type="button">新規登録</button>
        </div>
        <p class="auth-footnote">
          ※ 本アプリの多要素認証は汎用の認証アプリを使用します。<br />
          新規登録前に、 Microsoft Authenticator / Google Authenticatorなどをインストールください。
        </p>
      </section>

      <section id="room-setup" class="card hidden">
        <h2>お部屋</h2>
        <p class="muted">管理者はお部屋を作成、メンバーは招待URLから参加します。</p>
        <div class="room-grid">
          <div class="room-card">
            <h3>新規作成</h3>
            <input id="create-room-name" placeholder="お部屋名" />
            <button id="create-room-btn">お部屋を作る</button>
          </div>
        </div>
        <div class="room-grid" style="margin-top:14px;">
          <div class="room-card">
            <h3>招待されたお部屋</h3>
            <div class="row" style="margin-bottom:8px;">
              <button id="refresh-my-rooms-btn" type="button">一覧更新</button>
            </div>
            <div id="my-rooms-list" class="muted">読み込み中...</div>
            <p class="muted" style="margin-top:10px;">※ 退出すると「アクティブなお部屋」が解除されます（所属は残ります）。</p>
          </div>
        </div>
      </section>

      <section id="app" class="hidden">
        <div class="app-header">
          <p>
            利用者: <strong id="current-name"></strong>
            / お部屋: <strong id="current-room"></strong>
          </p>
        </div>

        <div class="toolbar">
          <p id="error-box" class="muted hidden" style="color:#b91c1c;"></p>
          <p id="billing-bar" class="billing-bar muted hidden"></p>
        </div>

        <section id="team-admin" class="card hidden">
          <h2>チーム管理（管理者）</h2>
          <h3 style="margin-top:8px;">メンバー</h3>
          <div class="row" style="margin-top:10px;">
            <button id="create-invite-btn" type="button">招待URLを発行（7日）</button>
            <button id="revoke-invite-btn" type="button" class="danger hidden">招待URLを失効</button>
            <input id="invite-url" placeholder="招待URL" readonly style="flex:1; min-width:180px;" />
          </div>
          <div id="member-list" style="margin-top:10px;"></div>

          <h3 style="margin-top:16px;">フォルダ</h3>
          <div id="folder-admin-list" style="margin-top:10px;"></div>

          <h3 style="margin-top:16px;">容量</h3>
          <p id="billing-status" class="muted"></p>
          <div class="row">
            <button id="purchase-1gbm" type="button">+1GB・月 (¥1,000)</button>
            <button id="purchase-10gbm" type="button">+10GB・月 (¥8,000)</button>
            <button id="purchase-50gbm" type="button">+50GB・月 (¥35,000)</button>
          </div>

          <h3 style="margin-top:16px;">お部屋</h3>
          <div class="row" style="margin-top:10px;">
            <button id="delete-team-btn" type="button" class="danger">お部屋を削除（全データ）</button>
          </div>
          <p class="muted" style="margin-top:10px;">
            ※ 削除は、アップロード画像に加え、サムネイル等の自動生成データも含みます。
          </p>

          <div class="row" style="margin-top:10px;">
            <button id="team-admin-back-btn" type="button">戻る</button>
          </div>
        </section>

        <section class="card">
          <h2>フォルダ作成</h2>
          <div class="row">
            <input id="folder-title" placeholder="〇〇工場_yyyymmdd" />
            <input id="folder-password" placeholder="フォルダパスワード（任意）" type="password" />
            <button id="create-folder-btn">作成</button>
          </div>
        </section>

        <section class="card">
          <h2>フォルダ一覧</h2>
          <select id="folder-select">
            <option value="">フォルダを選択してください</option>
          </select>
        </section>

        <section id="folder-detail" class="card hidden">
          <h2 id="folder-detail-title"></h2>
          <div class="row">
            <input id="photo-files" type="file" accept="image/*" multiple />
            <button id="upload-btn">複数アップロード</button>
            <span id="upload-loading" class="upload-loading hidden">アップロード中...</span>
            <button id="export-btn">PowerPoint出力</button>
            <button id="delete-folder-btn" type="button" class="danger hidden">フォルダ削除</button>
          </div>
          <div class="row" style="margin-top:10px;">
            <input id="folder-password-set" placeholder="フォルダパスワード（空で解除）" type="password" />
            <button id="set-folder-password-btn" type="button" class="hidden">鍵を設定/解除</button>
          </div>
          <div id="photo-list" class="photo-grid"></div>
        </section>
      </section>
    </main>

    <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>
    <script src="./config.js?v=20260215-2"></script>
    <script src="./main.js?v=20260216-7" type="module"></script>
  </body>
</html>
